<%- include('../includes/base.ejs') %> <%- include('../includes/header.ejs') %>
<main class="container">
	<h1>Create New Account</h1>
	<div class="col-sm-4 offset-3">
		<form
			method="POST"
			action="/signup?type=users"
			enctype="multipart/form-data"
		>
			<% if(hasError){%>
			<div class="border-danger rounded-3">
				<ul class="list-unstyled">
					<% for (const msg of errorMessage) { %>
					<li class="text-danger"><%= msg %></li>
					<% } %>
				</ul>
			</div>
			<% } %>
			<div class="mb-3">
				<label for="name" class="form-label">Name</label>
				<input
					type="text"
					class="
						form-control
						<%=
						validationErrors.find(e=>e.param==='name')?'border-danger':null
						%>
					"
					id="name"
					name="name"
					value="<%= hasError ? user.name:null %>"
				/>
			</div>
			<div class="mb-3">
				<label for="address" class="form-label">Address</label>
				<input
					type="text"
					class="form-control"
					id="address"
					name="address"
					value="<%= hasError ? user.address:null %>"
				/>
			</div>
			<div class="mb-3">
				<label for="contactNo" class="form-label">Contact Number</label>
				<input
					type="text"
					class="
						form-control
						<%=
						validationErrors.find(e=>e.param==='contactNo')?'border-danger':null
						%>
					"
					id="contactNo"
					name="contactNo"
					value="<%= hasError ? user.contactNo:null %>"
				/>
			</div>
			<div class="mb-3">
				<label for="email" class="form-label">Email address</label>
				<input
					type="email"
					class="
						form-control
						<%=
						validationErrors.find(e=>e.param==='email')?'border-danger':null
						%>
					"
					id="email"
					name="email"
					value="<%= hasError ? user.email:null %>"
				/>
			</div>
			<div class="mb-3">
				<label for="image">Image</label>
				<input type="file" name="image" id="image" class="form-control" />
			</div>
			<div class="mb-3">
				<label for="password" class="form-label">Password</label>
				<input
					type="password"
					class="
						form-control
						<%=
						validationErrors.find(e=>e.param==='password'||e.param==='confirmPassword')?'border-danger':null
						%>
					"
					id="password"
					name="password"
				/>
			</div>
			<div class="mb-3">
				<label for="confirmPassword" class="form-label">Confirm Password</label>
				<input
					type="password"
					class="
						form-control
						<%=
						validationErrors.find(e=>e.param==='password'||e.param==='confirmPassword')?'border-danger':null
						%>
					"
					id="confirmPassword"
					name="confirmPassword"
				/>
			</div>
			<input type="hidden" name="_csrf" value="<%= csrfToken %>" />
			<button type="submit" class="btn btn-primary">Submit</button>
		</form>
	</div>
</main>
<%- include('../includes/footer.ejs') %>
